<!DOCTYPE html>
<html>

    <body>
        <div class="container-fluid row" ng-if="$ctrl.toShow()">


            <div class="container-fluid col-sm-5" style="margin-top: 5%; margin-left: inherit; display: inline-block;">


                <ul class="project" ng-controller="DEBUG">

                    <div class="proyectcontainer">

                    <span ng-if="$ctrl.Proyecto.length>0">
                        <md-button class="md-raised "
                                   style="width: auto; position: absolute; top: 0; right: 0; margin-top: 1.5%; margin-right: 3%"
                                   href="/www/#!o{{ $ctrl.Orgs[0].id }}"></a><span style="margin-top: 10%"
                                                                                   class="glyphicon glyphicon-paperclip"
                                                                                   aria-hidden="true"></span>
                        </md-button>

                    </span>

                        <h2>Organizacion:</h2>

                        <div ng-repeat="orgs in $ctrl.Orgs">
                            <a href="/www/#!/metric{{ orgs.id }}" style="display: block">

                                <div ng-repeat="(key, value) in orgs  | custom:$ctrl.textsearch"
                                     style="margin-left: 13%">

                                              <span ng-if="isobj(value)== false">

                                                        <span ng-if="value" !="NaN">
                                                            <h3> {{ key }}:

                                                                <span>{{ value }} </span>
                                                            </h3>
                                                        </span>
                                              </span>
                                    <span ng-if="isobj(value)== true">
                                                        <span ng-if="key!='_id'"><h3>{{ key }}:</h3></span>
                                                        <div ng-repeat="(key2,value2) in value "
                                                             style="margin-left: 13%">
                                                            <h3> {{ key2 }}:
                                                                <span>{{ value2 }} </span>
                                                            </h3>
                                                        </div>
                                                    </span>

                                    <span ng-if="$last">
                                        <hr class="style2">
                                        </span>
                                </div>
                            </a>

                        </div>


                    </div>


                </ul>
            </div>
            <div class="container-fluid col-sm-7 " style="margin-top: 5%; margin-left: inherit; display: inline-block;"
                 ng-controller="Chart">

                <div class="row">

                    <div ng-if="$ctrl.Proyecto.length>0" ng-init="$ctrl.loadcharts()">
                        <h4>Métricas</h4>

                        <div class="porcentajesubvencionado col-sm-6">
                            <h3> % de presupuesto subvencionado:</h3>
                            <canvas id="doughnut" class="chart chart-doughnut"
                                    chart-data="$ctrl.datapie" chart-labels="$ctrl.labelspie"
                                    chart-options="optionspie">
                            </canvas>
                        </div>

                        <div class="col-sm-6">
                            <h3>Subvencion con respecto al País:</h3>

                            <canvas id="bar" class="chart chart-bar"
                                    chart-data="$ctrl.databar" chart-options="optionsbar"
                                    chart-series="$ctrl.seriesbar">

                            </canvas>
                        </div>
                        <div class="col-sm-6">
                            <h3>Distribución de los sectores del País:</h3>

                            <canvas id="doughnut" class="chart chart-doughnut"
                                    chart-data="$ctrl.datapolar" chart-labels="$ctrl.labelspolar"
                                    chart-options="optionspolar">

                            </canvas>


                        </div>

                    </div>


                </div>


            </div>

        </div>

        <div ng-if="!$ctrl.toShow()" class="row" ng-controller="MAPS" ng-init="mapObject('orgnum')" style="height: 85%">
            <div class="w3-sidebar w3-bar-block w3-theme-d4 w3-card col-sm-1 "
                 style="width:auto; height:auto; border-radius: 3px">
                <h5 class="w3-bar-item">Heat Maps</h5>
                <button id="orgnum" class="w3-bar-item w3-button tablink" ng-click="mapObject('orgnum')"
                        onclick="tabcolor('orgnum')" style="background: #ccc; color: #000000"> Nº Organizaciones
                </button>
                <button id="proynum" class="w3-bar-item w3-button tablink" ng-click="mapObject('proynum')"
                        onclick="tabcolor('proynum')"> Nº Proyectos
                </button>
                <button id="avenum" class="w3-bar-item w3-button tablink" ng-click="mapObject('avenum')"
                        onclick="tabcolor('avenum')"> ~ Proyectos
                </button>

                <button id="orgper" class="w3-bar-item w3-button tablink" ng-click="mapObject('orgper')"
                        onclick="tabcolor('orgper')"> % Subvencion
                </button>
                <h5 class="w3-bar-item">Communities</h5>
                <button id="communityh2020" class="w3-bar-item w3-button tablink" ng-click="communityObject('h2020')"
                        onclick="tabcolor('communityh2020');">
                    Comunidades-H2020
                </button>
                <button id="ParallelCoord" class="w3-bar-item w3-button tablink" ng-click="parallelcoordinates()"
                        onclick="tabcolor('ParallelCoord');">
                    Parallel Coordinates
                </button>
            </div>


            <div class="container-fluid col-sm-11" id="container-fluid"
                 style="display: flex; margin-top: 2%; margin-bottom: 2%; width: 100%">

                <style>
                    .graph {
                        margin-left: 12%;
                        width: 60%;
                    !important;
                        height: 85%;
                    !important;

                        position: relative;

                    }
                </style>
                <div id="container" class="graph w3-card col-sm-9 "
                     style="display: inline-table; width: 60%; height: 85%;">

                </div>


                <div id="sigma-container" class="graph col-sm-9" style="display: inline-table ; "></div>

                <div class="col-sm-2 " id="wordcloud"
                     style="display: inline-table;height: fit-content;">
                    <div id="nodeinfo" class="nodeinfo">

                    </div>
                    <div id="nodeinfohover" class="nodeinfo ">
                    </div>
                </div>

                <div id="parallel" class="parcoords" style="width:80%;height:40%; margin-left: 15%"></div>


                <div id="projectid" class="col-sm-2" style="display:none; height: fit-content;
    padding: 1%; margin: 1%;">
                    <div ng-repeat="(key, value) in Proyecto[0]">
                        <h3> {{ key }}:

                            <span>{{ value }} </span>
                        </h3>
                    </div>
                </div>

            </div>

        </div>


    </body>


    <script>
        function tabcolor(id) {

            var i;
            var x = document.getElementsByClassName("tablink");
            for (i = 0; i < x.length; i++) {
                x[i].style.background = 'none';
                x[i].style.color = '#ffffff';

            }
            document.getElementById(id).style.background = '#ccc';
            document.getElementById(id).style.color = '#000000';


        }


    </script>
</html>